const fs = require("fs");

fs.readFile("input5.txt", "utf8", (err, data) => {
  if (err) {
    console.error(err);
    return;
  }

  let arr = data.split("\n");

  let grid = [
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["", "", "", "", "", "", "", "", ""],
    ["P", "", "C", "", "", "M", "", "", ""],
    ["D", "", "P", "B", "", "V", "S", "", ""],
    ["Q", "V", "R", "V", "", "G", "B", "", ""],
    ["R", "W", "G", "J", "", "T", "M", "", "V"],
    ["V", "Q", "Q", "F", "C", "N", "V", "", "W"],
    ["B", "Z", "Z", "H", "L", "P", "L", "J", "N"],
    ["H", "D", "L", "D", "W", "R", "R", "P", "C"],
    ["F", "L", "H", "R", "Z", "J", "J", "D", "D"],
  ];

  for (let i = 0; i < arr.length; i++) {
    let temp = arr[i];
    let num1 = "",
      num2 = "",
      num3 = "";
    let next = 0;

    for (let j = 5; j < temp.length; j++) {
      if (temp[j] === " ") {
        next = j + 6;
        break;
      } else {
        num1 += temp[j];
      }
    }

    for (let j = next; j < temp.length; j++) {
      if (temp[j] === " ") {
        next = j + 4;
        break;
      } else {
        num2 += temp[j];
      }
    }

    for (let j = next; j < temp.length; j++) {
      num3 += temp[j];
    }

    num1 = parseInt(num1);
    num2 = parseInt(num2) - 1;
    num3 = parseInt(num3) - 1;

    // move AMOUNT from POSITION #1 to POSITION #2

    let toBeMoved = [];
    let amount = num1;
    for (let j = 0; j < grid.length; j++) {
      if (amount) {
        if (grid[j][num2] !== "") {
          toBeMoved.push(grid[j][num2]);
          grid[j][num2] = "";
          amount--;
        }
      } else {
        break;
      }
    }

    let j = 0;
    while (j < grid.length && grid[j][num3] === "") j++;
    j--;

    while (toBeMoved.length) {
      grid[j][num3] = toBeMoved.pop();
      j--;
    }
  }

  let str = "";

  for (let i = 0; i < grid[0].length; i++) {
    let z = 0

    while (grid[z][i] === "") z++
    str += grid[z][i];
  }

  console.log(str);
});

// [P]     [C]         [M]
// [D]     [P] [B]     [V] [S]
// [Q] [V] [R] [V]     [G] [B]
// [R] [W] [G] [J]     [T] [M]     [V]
// [V] [Q] [Q] [F] [C] [N] [V]     [W]
// [B] [Z] [Z] [H] [L] [P] [L] [J] [N]
// [H] [D] [L] [D] [W] [R] [R] [P] [C]
// [F] [L] [H] [R] [Z] [J] [J] [D] [D]
//  1   2   3   4   5   6   7   8   9
